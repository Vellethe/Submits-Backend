@page
@using TrainingProject.Pages.Shared.Components.LoginMenu;
@model TrainingProject.Pages.MyPage.IndexModel
@{

}

<link rel="stylesheet" href="~/css/site.css">
<link rel="stylesheet" href="~/css/MyPage.css">
<script src="~/js/MyPage.js" defer></script>

<div class="container">

    <div id="myPage">
        <div id="userInfo">
            <div id="imgDiv">
                <img id="profileImg" src="Pictures/Sample-Profile-Pic.png" />
            </div>
            <environment names="Development">
                @await Component.InvokeAsync(nameof(FakeLoginMenu))
            </environment>
            <form>
            <button id="graphButton" asp-page="/Graph/index">Show Progress Graph</button>
            </form>

            <ul class="userInput">
                <li>
                    <label id="userNameLabel" for="userName">Name: </label>
                    <p id="userName">@Model.user.Name</p>
                </li>
                <li>
                    <label for="userGender">Gender: </label>
                    <p id="userGender">@(Model.user.IsMale ? "Male" : "Female")</p>
                </li>
                <li>
                    <label for="userAge">Age: </label>
                    <p id="userAge">@Model.user.Age y/o</p>
                </li>
                <li>
                    <label for="userWeight">Weight: </label>
                    <p id="userWeight">@Model.user.CurrentWeight kg</p>
                </li>
                <li>
                    <label id="goalWeightLabel" for="goalWeight">Goal Weight: </label>
                    <p id="goalWeight">@Model.user.TargetWeight kg</p>
                </li>
                <li>
                    <label id="goalLabel" for="goal">Goal: </label>
                    <p id="goal">@Model.user.Goal</p>
                </li>
                <li>
                    <label for="dailyCalories">Daily Calories: </label>
                    <p id="dailyCalories">@Model.calorieCount.FinishedBMR kcal</p>
                </li>
                <li>
                    <label for="finishDate">Finished Before: </label>
                    <p id="finishDate">@Model.calorieCount.FinishedDate</p>
                </li>
            </ul>

            <details>
                <summary>Calculate</summary>
                    <form method="post">
                        <ul class="userInput">
                            <li>
                                <label for="age">Age</label>
                                <input asp-for="@Model.user.Age" id="age" type="number" name="age" />
                            </li>
                            <li>
                                <label for="height">Height in cm</label>
                                <input asp-for="@Model.user.Height" id="height" type="number" name="height" />
                            </li>
                            <li>
                                <label for="weight">Weight in kg</label>
                                <input asp-for="@Model.user.CurrentWeight" id="weight" type="number" name="weight" />
                            </li>
                            <li>
                                <label for="gender">Gender</label>
                                <select asp-for="@Model.user.IsMale" id="gender" name="gender">
                                    <option value="true">Male</option>
                                    <option value="false">Female</option>
                                </select>
                            </li>
                            <li>
                                <label for="goalSelect">Goal</label>
                                <select asp-for="@Model.user.Goal" id="goalSelect" name="goal">
                                    <option value="Lose Weight">Lose Weight</option>
                                    <option value="Maintain">Maintain</option>
                                    <option value="Build Muscle">Build Muscle</option>
                                </select>
                            </li>
                            <li>
                                <label id="targetWeightLabel" for="targetWeight">Goal Weight</label>
                                <input asp-for="@Model.user.TargetWeight" id="targetWeight" type="number" name="targetWeight" />
                            </li>
                        </ul>
                        <button type="submit">Submit</button>
                    </form>
                </details>
            @if(!Model.user.IsValid()){
                <script>
                    alert('the underweight BMI category. Please enter new values!');
                    var loc = window.location;
                    window.location = loc.protocol + '//' + loc.host + loc.pathname + loc.search;
                </script>
            }
            @if (Model.calorieCount.FinishedBMR == "0")
            {
                <script>
                    alert('For an individual of your height, your goal weight would put you in the underweight BMI category. Please enter new values!');
                    var loc = window.location;
                    window.location = loc.protocol + '//' + loc.host + loc.pathname + loc.search;
                </script>
            }
        </div>
    </div>
</div>